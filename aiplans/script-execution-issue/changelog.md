# Changelog: Исправление проблемы с выполнением скриптов

## 2025-12-23: Создание плана
- Создан подробный план анализа и решения проблемы
- Проанализирована текущая архитектура роутера
- Выявлены потенциальные причины проблемы:
  1. Кэш скриптов (`scriptCache`) не очищается при удалении скриптов
  2. Логика `removeExistingScript` удаляет скрипты из DOM, но не из кэша
  3. `appendFreshScript` проверяет кэш и пропускает выполнение, если скрипт уже в кэше

## Следующие шаги:
1. Изучить реализацию `sandbox.ts` и `purgeAllScripts()`
2. Проанализировать все использования `scriptCache`
3. Разработать конкретные исправления
4. Реализовать и протестировать изменения