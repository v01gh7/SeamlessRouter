(function(b,T){typeof exports=="object"&&typeof module<"u"?T(exports):typeof define=="function"&&define.amd?define(["exports"],T):(b=typeof globalThis<"u"?globalThis:b||self,T(b.SeamlessRouter={}))})(this,(function(b){"use strict";let y={...{prefetch:{enabled:!0,mobileThreshold:768,desktopPrefetchAll:!0,mobilePrefetchLimit:3,navigationExtraPages:2,hoverDelay:300,touchDelay:100},cache:{enabled:!0,maxSizeMB:30,maxEntries:100,alwaysCache:["/","/index.html","/contacts.html","/about.html"],checkLastModified:!0,ttlHours:24},offline:{enabled:!0,showOfflineIndicator:!0,offlinePageUrl:"/offline.html",cacheMedia:!1},animations:{enabled:!0,defaultDuration:300,respectReducedMotion:!0,animationTypes:["fade","slide-left","slide-right","slide-up","slide-down","collapse","diagonal","mask-circle","mask-gradient"],defaultType:"fade"},general:{debug:process.env.NODE_ENV==="development",dataNoRoutingAttribute:"data-no-routing"}}};function c(){return{...y}}function x(n){y={...y,...n,prefetch:{...y.prefetch,...n.prefetch},cache:{...y.cache,...n.cache},offline:{...y.offline,...n.offline},animations:{...y.animations,...n.animations},general:{...y.general,...n.general}}}function S(){return window.innerWidth<c().prefetch.mobileThreshold}function X(){const n=c();return n.prefetch.enabled?S()?n.prefetch.mobilePrefetchLimit:n.prefetch.desktopPrefetchAll?1/0:n.prefetch.mobilePrefetchLimit:0}class G{cache=new Map;stats={totalEntries:0,totalSize:0,hits:0,misses:0,hitRate:0};isSupported=!1;constructor(){this.checkSupport(),this.loadFromStorage()}checkSupport(){try{const e="__router_cache_test__";localStorage.setItem(e,"test"),localStorage.removeItem(e),this.isSupported=!0}catch{console.warn("‚ö†Ô∏è localStorage not supported, using memory cache only"),this.isSupported=!1}}loadFromStorage(){if(this.isSupported)try{const e=localStorage.getItem("router_cache");if(e){const t=JSON.parse(e);this.cache=new Map(t.cache||[]),this.stats=t.stats||this.stats,this.cleanupExpired(),c().general.debug&&console.log("üì¶ Cache loaded from storage:",this.stats)}}catch(e){console.error("‚ùå Error loading cache from storage:",e),this.clear()}}saveToStorage(){if(this.isSupported)try{const e={cache:Array.from(this.cache.entries()),stats:this.stats,timestamp:Date.now()};localStorage.setItem("router_cache",JSON.stringify(e))}catch(e){console.error("‚ùå Error saving cache to storage:",e)}}cleanupExpired(){const e=c(),t=Date.now(),i=e.cache.ttlHours*60*60*1e3;let a=0;for(const[r,s]of this.cache.entries())e.cache.alwaysCache.includes(r)||t-s.timestamp>i&&(this.cache.delete(r),this.stats.totalSize-=s.size,a++);this.stats.totalEntries=this.cache.size,a>0&&c().general.debug&&console.log(`üßπ Cleaned up ${a} expired cache entries`)}shouldUpdateEntry(e,t,i){const a=this.cache.get(e);return!!(!a||t&&a.lastModified!==t||i&&a.etag!==i)}calculateSize(e,t){let i=0;return i+=new Blob([e]).size,i+=JSON.stringify(t).length*2,i+=100,i}checkLimits(){const e=c(),t=e.cache.maxSizeMB*1024*1024,i=e.cache.maxEntries;for(;(this.stats.totalSize>t||this.cache.size>i)&&this.cache.size>0;){let a=null,r=Date.now();for(const[s,o]of this.cache.entries())e.cache.alwaysCache.includes(s)||o.timestamp<r&&(r=o.timestamp,a=s);if(a){const s=this.cache.get(a);this.cache.delete(a),this.stats.totalSize-=s.size,this.stats.totalEntries--,c().general.debug&&console.log(`üóëÔ∏è Removed old cache entry: ${a}`)}else break}}set(e,t,i={}){if(!c().cache.enabled)return!1;const a=c(),r=i["last-modified"],s=i.etag;if(!this.shouldUpdateEntry(e,r,s))return a.general.debug&&console.log(`‚ôªÔ∏è Cache entry not changed: ${e}`),!1;const o=this.cache.get(e);o&&(this.stats.totalSize-=o.size);const d=this.calculateSize(t,i),f={url:e,html:t,headers:i,timestamp:Date.now(),size:d,lastModified:r,etag:s};return this.cache.set(e,f),this.stats.totalSize+=d,this.stats.totalEntries=this.cache.size,this.checkLimits(),this.saveToStorage(),a.general.debug&&console.log(`üíæ Cache set: ${e} (${Math.round(d/1024)}KB)`),!0}get(e){if(!c().cache.enabled)return null;const t=this.cache.get(e);return t?(this.stats.hits++,this.updateHitRate(),c().general.debug&&console.log(`üéØ Cache hit: ${e}`),t):(this.stats.misses++,this.updateHitRate(),c().general.debug&&console.log(`‚ùå Cache miss: ${e}`),null)}has(e){return this.cache.has(e)}delete(e){const t=this.cache.get(e);return t?(this.cache.delete(e),this.stats.totalSize-=t.size,this.stats.totalEntries--,this.saveToStorage(),c().general.debug&&console.log(`üóëÔ∏è Cache deleted: ${e}`),!0):!1}clear(){const e=this.cache.size;this.cache.clear(),this.stats={totalEntries:0,totalSize:0,hits:0,misses:0,hitRate:0},this.isSupported&&localStorage.removeItem("router_cache"),c().general.debug&&console.log(`üßπ Cache cleared (${e} entries removed)`)}updateHitRate(){const e=this.stats.hits+this.stats.misses;this.stats.hitRate=e>0?this.stats.hits/e:0}getStats(){return{...this.stats}}getUrls(){return Array.from(this.cache.keys())}getSizeMB(){return Math.round(this.stats.totalSize/(1024*1024)*100)/100}isCacheSupported(){return this.isSupported}}class J{prefetchManager;navigationHistory=[];maxHistorySize=100;isEnabled=!0;constructor(e){this.prefetchManager=e,this.isEnabled=c().prefetch.enabled,this.loadNavigationHistory(),this.setupNavigationTracking()}loadNavigationHistory(){try{const e=localStorage.getItem("router_navigation_history");e&&(this.navigationHistory=JSON.parse(e))}catch(e){console.warn("Failed to load navigation history:",e),this.navigationHistory=[]}}saveNavigationHistory(){try{localStorage.setItem("router_navigation_history",JSON.stringify(this.navigationHistory))}catch(e){console.warn("Failed to save navigation history:",e)}}setupNavigationTracking(){if(!this.isEnabled)return;let e=window.location.pathname;const t=()=>{const r=window.location.pathname;r!==e&&(this.recordNavigation(e,r),e=r,this.prefetchBasedOnPatterns(r))};window.addEventListener("popstate",t);const i=history.pushState,a=history.replaceState;history.pushState=function(...r){i.apply(this,r),setTimeout(t,0)},history.replaceState=function(...r){a.apply(this,r),setTimeout(t,0)}}recordNavigation(e,t){const i=this.navigationHistory.find(a=>a.from===e&&a.to===t);i?(i.count++,i.timestamp=Date.now()):(this.navigationHistory.push({from:e,to:t,count:1,timestamp:Date.now()}),this.navigationHistory.length>this.maxHistorySize&&(this.navigationHistory.sort((a,r)=>r.timestamp-a.timestamp),this.navigationHistory=this.navigationHistory.slice(0,this.maxHistorySize))),this.saveNavigationHistory()}prefetchBasedOnPatterns(e){if(!this.isEnabled)return;const t=c(),i=S(),a=this.getLikelyNextPages(e);if(a.length===0)return;let r;i?r=t.prefetch.mobilePrefetchLimit:r=t.prefetch.desktopPrefetchAll?a.length:t.prefetch.mobilePrefetchLimit;const s=a.slice(0,r);s.forEach(o=>{this.prefetchManager.prefetch(o.url,"auto")}),t.general.debug&&s.length>0&&console.log(`üéØ Intelligent prefetch for ${e}:`,s.map(o=>o.url))}getLikelyNextPages(e){const t=this.navigationHistory.filter(a=>a.from===e);return t.length===0?[]:t.map(a=>{const r=a.count,s=Date.now()-a.timestamp,o=Math.max(0,1-s/(720*60*60*1e3)),d=r*(1+o);return{url:a.to,probability:d}}).sort((a,r)=>r.probability-a.probability)}prefetchTopLevelPages(){if(!this.isEnabled)return;const e=c(),t=S(),i=new Set;this.navigationHistory.forEach(o=>{i.add(o.from),i.add(o.to)}),e.cache.alwaysCache.forEach(o=>{i.add(o)});const a=Array.from(i);if(a.length===0)return;let r;t?r=Math.min(e.prefetch.mobilePrefetchLimit,a.length):r=e.prefetch.desktopPrefetchAll?a.length:e.prefetch.mobilePrefetchLimit;const s=a.slice(0,r);s.forEach(o=>{this.prefetchManager.prefetch(o,"low")}),e.general.debug&&s.length>0&&console.log("üè† Prefetching top-level pages:",s)}prefetchNavigationExtraPages(e=document.body){if(!this.isEnabled)return;const t=c(),i=t.prefetch.navigationExtraPages;if(i<=0)return;const a=e.querySelectorAll('a[href*="page"], a[href*="p="], a[rel="next"], a[rel="prev"]'),r=[];if(a.forEach(o=>{const d=o.getAttribute("href");if(d&&!(d.startsWith("#")||d.startsWith("mailto:")||d.startsWith("tel:")||d.includes("://")))try{const f=new URL(d,window.location.origin);f.origin===window.location.origin&&r.push(f.pathname+f.search+f.hash)}catch{}}),r.length===0)return;const s=r.slice(0,i);s.forEach(o=>{this.prefetchManager.prefetch(o,"auto")}),t.general.debug&&s.length>0&&console.log(`üìÑ Prefetching ${s.length} extra navigation pages`)}clearHistory(){this.navigationHistory=[],localStorage.removeItem("router_navigation_history"),c().general.debug&&console.log("üßπ Navigation history cleared")}getStats(){return{totalPatterns:this.navigationHistory.length,uniqueFromPages:new Set(this.navigationHistory.map(e=>e.from)).size,uniqueToPages:new Set(this.navigationHistory.map(e=>e.to)).size,totalTransitions:this.navigationHistory.reduce((e,t)=>e+t.count,0)}}setEnabled(e){this.isEnabled=e}}class V{cacheManager;intelligentPrefetch;queue=[];activeRequests=new Set;maxConcurrent=3;isEnabled=!0;constructor(e){this.cacheManager=e,this.intelligentPrefetch=new J(this),this.isEnabled=c().prefetch.enabled,this.maxConcurrent=S()?2:3}async prefetch(e,t="low"){if(!this.isEnabled||this.activeRequests.has(e)||this.cacheManager.has(e))return!1;const i={url:e,priority:t,timestamp:Date.now(),controller:new AbortController};return this.addToQueue(i),this.processQueue(),!0}addToQueue(e){const t=this.queue.findIndex(i=>this.getPriorityValue(i.priority)<this.getPriorityValue(e.priority));t===-1?this.queue.push(e):this.queue.splice(t,0,e)}getPriorityValue(e){switch(e){case"high":return 0;case"auto":return 1;case"low":return 2;default:return 2}}async processQueue(){for(;this.activeRequests.size<this.maxConcurrent&&this.queue.length>0;){const e=this.queue.shift();if(!e)break;await this.executePrefetch(e)}}async executePrefetch(e){this.activeRequests.add(e.url);try{const t=await fetch(e.url,{method:"GET",priority:e.priority,signal:e.controller?.signal});if(!t.ok)throw new Error(`HTTP ${t.status}`);const i=await t.text(),a={};t.headers.forEach((r,s)=>{a[s]=r}),this.cacheManager.set(e.url,i,a),c().general.debug&&console.log(`‚úÖ Prefetched: ${e.url} (${e.priority})`)}catch(t){t instanceof Error&&t.name!=="AbortError"&&console.warn(`‚ö†Ô∏è Prefetch failed for ${e.url}:`,t)}finally{this.activeRequests.delete(e.url),this.processQueue()}}cancelPrefetch(e){const t=this.queue.findIndex(i=>i.url===e);if(t!==-1)return this.queue[t].controller?.abort(),this.queue.splice(t,1),!0;if(this.activeRequests.has(e)){for(const i of this.queue)if(i.url===e&&i.controller)return i.controller.abort(),this.activeRequests.delete(e),!0}return!1}prefetchMultiple(e,t="low"){if(!this.isEnabled)return;const i=X();(i===1/0?e:e.slice(0,i)).forEach(r=>{this.prefetch(r,t)})}prefetchNavigationLinks(e=document.body){if(!this.isEnabled)return;const t=c(),i=this.extractNavigationLinks(e);if(i.length>0){const a=S()?"low":"auto";this.prefetchMultiple(i,a),t.general.debug&&console.log(`üîó Prefetching ${i.length} navigation links`)}this.intelligentPrefetch.prefetchTopLevelPages(),this.intelligentPrefetch.prefetchNavigationExtraPages(e)}extractNavigationLinks(e){const t=[],i=c(),a=e.querySelectorAll(`a[href]:not([${i.general.dataNoRoutingAttribute}])`);for(const r of a){const s=r.getAttribute("href");if(s&&!(s.startsWith("#")||s.startsWith("mailto:")||s.startsWith("tel:")||s.includes("://")))try{const o=new URL(s,window.location.origin);o.origin===window.location.origin&&t.push(o.pathname+o.search+o.hash)}catch{}}return t}clearQueue(){this.queue.forEach(e=>{e.controller?.abort()});for(const e of this.activeRequests)this.cancelPrefetch(e);this.queue=[],this.activeRequests.clear(),c().general.debug&&console.log("üßπ Prefetch queue cleared")}setEnabled(e){this.isEnabled=e,e||this.clearQueue()}getStats(){return{queueLength:this.queue.length,activeRequests:this.activeRequests.size,maxConcurrent:this.maxConcurrent,isEnabled:this.isEnabled,intelligentPrefetch:this.intelligentPrefetch.getStats()}}getIntelligentPrefetch(){return this.intelligentPrefetch}clearNavigationHistory(){this.intelligentPrefetch.clearHistory()}}class Z{isAnimating=!1;currentAnimation=null;prefersReducedMotion=!1;constructor(){if(this.checkReducedMotion(),window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion: reduce)");this.prefersReducedMotion=e.matches,e.addEventListener("change",t=>{this.prefersReducedMotion=t.matches})}}checkReducedMotion(){window.matchMedia&&(this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches)}shouldAnimate(e){const t=c();return!(!t.animations.enabled||t.animations.respectReducedMotion&&this.prefersReducedMotion)}async animatePageTransition(e,t,i,a={}){if(!this.shouldAnimate(a)){i.replaceChild(t,e),a.onComplete?.();return}this.isAnimating&&await this.cancelCurrentAnimation(),this.isAnimating=!0,a.onStart?.();const r=c(),s=a.type||"fade",o=a.duration||r.animations.defaultDuration,d=a.easing||"ease-in-out";try{await this.executeAnimation(e,t,i,s,o,d,a)}catch(f){console.error("Animation error:",f),i.replaceChild(t,e)}finally{this.isAnimating=!1}}async executeAnimation(e,t,i,a,r,s,o){this.prepareElements(e,t,a),i.appendChild(t);const d=this.getKeyframes(a,e,t),f=e.animate(d,{duration:r,easing:s,fill:"forwards"});this.currentAnimation=f;const w=this.getNewContentKeyframes(a),E=t.animate(w,{duration:r,easing:s,fill:"forwards"});await Promise.all([f.finished,E.finished]),this.finishTransition(e,t,i),o.onComplete?.(),this.currentAnimation=null}prepareElements(e,t,i){const a={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"};Object.assign(e.style,a),Object.assign(t.style,{...a,opacity:"0",visibility:"hidden"}),e.classList.add("router-animation-old"),t.classList.add("router-animation-new"),e.classList.add(`router-animation-${i}`),t.classList.add(`router-animation-${i}`)}getKeyframes(e,t,i){switch(e){case"fade":return[{opacity:1,visibility:"visible"},{opacity:0,visibility:"hidden"}];case"slide-left":return[{transform:"translateX(0)",opacity:1,visibility:"visible"},{transform:"translateX(-100%)",opacity:0,visibility:"hidden"}];case"slide-right":return[{transform:"translateX(0)",opacity:1,visibility:"visible"},{transform:"translateX(100%)",opacity:0,visibility:"hidden"}];case"slide-up":return[{transform:"translateY(0)",opacity:1,visibility:"visible"},{transform:"translateY(-100%)",opacity:0,visibility:"hidden"}];case"slide-down":return[{transform:"translateY(0)",opacity:1,visibility:"visible"},{transform:"translateY(100%)",opacity:0,visibility:"hidden"}];case"collapse":return[{transform:"scale(1)",opacity:1,visibility:"visible"},{transform:"scale(0.8)",opacity:0,visibility:"hidden"}];case"diagonal":return[{transform:"translate(0, 0) scale(1)",opacity:1,visibility:"visible"},{transform:"translate(100%, 100%) scale(0.8)",opacity:0,visibility:"hidden"}];default:return[{opacity:1,visibility:"visible"},{opacity:0,visibility:"hidden"}]}}getNewContentKeyframes(e){switch(e){case"fade":return[{opacity:0,visibility:"hidden"},{opacity:1,visibility:"visible"}];case"slide-left":return[{transform:"translateX(100%)",opacity:0,visibility:"hidden"},{transform:"translateX(0)",opacity:1,visibility:"visible"}];case"slide-right":return[{transform:"translateX(-100%)",opacity:0,visibility:"hidden"},{transform:"translateX(0)",opacity:1,visibility:"visible"}];case"slide-up":return[{transform:"translateY(100%)",opacity:0,visibility:"hidden"},{transform:"translateY(0)",opacity:1,visibility:"visible"}];case"slide-down":return[{transform:"translateY(-100%)",opacity:0,visibility:"hidden"},{transform:"translateY(0)",opacity:1,visibility:"visible"}];case"collapse":return[{transform:"scale(1.2)",opacity:0,visibility:"hidden"},{transform:"scale(1)",opacity:1,visibility:"visible"}];case"diagonal":return[{transform:"translate(-100%, -100%) scale(1.2)",opacity:0,visibility:"hidden"},{transform:"translate(0, 0) scale(1)",opacity:1,visibility:"visible"}];default:return[{opacity:0,visibility:"hidden"},{opacity:1,visibility:"visible"}]}}finishTransition(e,t,i){i.removeChild(e),t.style.cssText="",t.classList.remove("router-animation-new","router-animation-old"),Array.from(t.classList).filter(r=>r.startsWith("router-animation-")).forEach(r=>t.classList.remove(r))}async cancelCurrentAnimation(){this.currentAnimation&&(this.currentAnimation.cancel(),this.currentAnimation=null),this.isAnimating=!1}isAnimationInProgress(){return this.isAnimating}getAvailableAnimationTypes(){return c().animations.animationTypes}static createAnimationStyles(){return`
      /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ animations.css */
      .router-animation-old,
      .router-animation-new {
        will-change: transform, opacity;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
      }

      @media (prefers-reduced-motion: reduce) {
        .router-animation-old,
        .router-animation-new {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    `}static loadAnimationStyles(){if(document.head.querySelector('link[href*="animations.css"]'))return;const e=document.createElement("link");e.rel="stylesheet",e.href="/animations.css",e.onload=()=>console.log("‚úÖ Animation styles loaded"),e.onerror=()=>console.warn("‚ö†Ô∏è Failed to load animation styles"),document.head.appendChild(e)}}class ee extends Z{maskSupported=!1;constructor(){super(),this.checkMaskSupport()}checkMaskSupport(){const e=document.createElement("div");this.maskSupported="maskImage"in e.style||"webkitMaskImage"in e.style||"mozMaskImage"in e.style,this.maskSupported||console.warn("‚ö†Ô∏è CSS mask-image –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ. –ë—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏.")}shouldUseMaskAnimation(e){if(!this.maskSupported)return!1;const t=c(),i=e.type||t.animations.defaultType||"fade";return i==="mask-circle"||i==="mask-gradient"}async animatePageTransition(e,t,i,a={}){return this.shouldUseMaskAnimation(a)?this.executeMaskAnimation(e,t,i,a):super.animatePageTransition(e,t,i,a)}async executeMaskAnimation(e,t,i,a){if(!this.shouldAnimate(a)){i.replaceChild(t,e),a.onComplete?.();return}this.isAnimating&&await this.cancelCurrentAnimation(),this.isAnimating=!0,a.onStart?.();const r=c(),s=a.type||"mask-circle",o=a.duration||r.animations.defaultDuration,d=a.easing||"ease-in-out";try{await this.executeMaskAnimationInternal(e,t,i,s,o,d,a)}catch(f){console.error("Mask animation error:",f),await super.animatePageTransition(e,t,i,{...a,type:"fade"})}finally{this.isAnimating=!1}}async executeMaskAnimationInternal(e,t,i,a,r,s,o){this.prepareElementsForMask(e,t,a),i.appendChild(t);const d=this.getMaskKeyframes(a),f=e.animate(d,{duration:r,easing:s,fill:"forwards"});this.currentAnimation=f;const w=this.getNewContentMaskKeyframes(a),E=t.animate(w,{duration:r,easing:s,fill:"forwards"});await Promise.all([f.finished,E.finished]),this.finishMaskTransition(e,t,i),o.onComplete?.(),this.currentAnimation=null}prepareElementsForMask(e,t,i){const a={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"};Object.assign(e.style,a),Object.assign(t.style,{...a,opacity:"0",visibility:"hidden"}),e.classList.add("router-animation-old"),t.classList.add("router-animation-new"),e.classList.add(`router-animation-${i}`),t.classList.add(`router-animation-${i}`),e.classList.add("router-mask-animation"),t.classList.add("router-mask-animation")}getMaskKeyframes(e){switch(e){case"mask-circle":return[{maskImage:"radial-gradient(circle at center, black 0%, black 100%)",webkitMaskImage:"radial-gradient(circle at center, black 0%, black 100%)",opacity:1,visibility:"visible"},{maskImage:"radial-gradient(circle at center, black 0%, transparent 100%)",webkitMaskImage:"radial-gradient(circle at center, black 0%, transparent 100%)",opacity:0,visibility:"hidden"}];case"mask-gradient":return[{maskImage:"linear-gradient(to right, black 0%, black 100%)",webkitMaskImage:"linear-gradient(to right, black 0%, black 100%)",opacity:1,visibility:"visible"},{maskImage:"linear-gradient(to right, transparent 0%, transparent 100%)",webkitMaskImage:"linear-gradient(to right, transparent 0%, transparent 100%)",opacity:0,visibility:"hidden"}];default:return[{opacity:1,visibility:"visible"},{opacity:0,visibility:"hidden"}]}}getNewContentMaskKeyframes(e){switch(e){case"mask-circle":return[{maskImage:"radial-gradient(circle at center, transparent 0%, transparent 100%)",webkitMaskImage:"radial-gradient(circle at center, transparent 0%, transparent 100%)",opacity:0,visibility:"hidden"},{maskImage:"radial-gradient(circle at center, black 0%, black 100%)",webkitMaskImage:"radial-gradient(circle at center, black 0%, black 100%)",opacity:1,visibility:"visible"}];case"mask-gradient":return[{maskImage:"linear-gradient(to right, transparent 0%, transparent 100%)",webkitMaskImage:"linear-gradient(to right, transparent 0%, transparent 100%)",opacity:0,visibility:"hidden"},{maskImage:"linear-gradient(to right, black 0%, black 100%)",webkitMaskImage:"linear-gradient(to right, black 0%, black 100%)",opacity:1,visibility:"visible"}];default:return[{opacity:0,visibility:"hidden"},{opacity:1,visibility:"visible"}]}}finishMaskTransition(e,t,i){i.removeChild(e),t.style.cssText="",t.classList.remove("router-animation-new","router-animation-old","router-mask-animation"),Array.from(t.classList).filter(r=>r.startsWith("router-animation-")).forEach(r=>t.classList.remove(r)),t.style.maskImage="",t.style.webkitMaskImage=""}isMaskSupported(){return this.maskSupported}static createMaskAnimationStyles(){return`
      /* –°—Ç–∏–ª–∏ –¥–ª—è –º–∞—Å–∫–æ–≤—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π */
      .router-mask-animation {
        mask-size: 100% 100%;
        mask-repeat: no-repeat;
        mask-position: center;
        -webkit-mask-size: 100% 100%;
        -webkit-mask-repeat: no-repeat;
        -webkit-mask-position: center;
      }

      /* –ö–ª–∞—Å—Å—ã –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∞—Å–∫–æ–≤—ã–º–∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ */
      .router-animate-mask-circle {
        animation: router-mask-circle-in 0.5s ease-in-out;
      }

      .router-animate-mask-gradient {
        animation: router-mask-gradient-in 0.5s ease-in-out;
      }

      /* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ prefers-reduced-motion */
      @media (prefers-reduced-motion: reduce) {
        .router-animate-mask-circle,
        .router-animate-mask-gradient {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
        }
      }
    `}}class te{isSupported=!1;registration=null;isEnabled=!0;constructor(){this.isSupported="serviceWorker"in navigator,this.isEnabled=c().offline.enabled}async register(){if(!this.isSupported||!this.isEnabled)return console.warn("‚ö†Ô∏è Service Worker not supported or disabled"),!1;try{return this.registration=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),console.log("‚úÖ Service Worker registered:",this.registration),this.setupUpdateListeners(),this.setupNetworkMonitoring(),!0}catch(e){return console.error("‚ùå Service Worker registration failed:",e),!1}}setupUpdateListeners(){this.registration&&(this.registration.addEventListener("updatefound",()=>{const e=this.registration.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&(navigator.serviceWorker.controller?(console.log("üîÑ New Service Worker available"),this.showUpdateNotification()):console.log("‚úÖ Service Worker installed for the first time"))})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("üéÆ Service Worker controller changed")}))}showUpdateNotification(){console.log("üì¢ New version available. Refresh to update."),c().offline.showOfflineIndicator&&(this.showToast("New version available. Refreshing..."),setTimeout(()=>{window.location.reload()},3e3))}setupNetworkMonitoring(){if(!c().offline.showOfflineIndicator)return;const e=()=>{navigator.onLine?(this.hideOfflineIndicator(),console.log("üåê Online")):(this.showOfflineIndicator(),console.log("üì¥ Offline"))};window.addEventListener("online",e),window.addEventListener("offline",e),e()}showOfflineIndicator(){let e=document.getElementById("offline-indicator");e||(e=document.createElement("div"),e.id="offline-indicator",e.innerHTML=`
        <div style="
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: #f44336;
          color: white;
          text-align: center;
          padding: 10px;
          z-index: 9999;
          font-family: sans-serif;
          font-size: 14px;
        ">
          ‚ö†Ô∏è You are offline. Some features may be unavailable.
        </div>
      `,document.body.appendChild(e)),e.style.display="block"}hideOfflineIndicator(){const e=document.getElementById("offline-indicator");e&&(e.style.display="none")}showToast(e){const t=document.createElement("div");t.innerHTML=`
      <div style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #333;
        color: white;
        padding: 12px 20px;
        border-radius: 4px;
        z-index: 10000;
        font-family: sans-serif;
        font-size: 14px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      ">
        ${e}
      </div>
    `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},3e3)}async update(){if(!this.registration)return!1;try{return await this.registration.update(),console.log("üîÑ Service Worker update triggered"),!0}catch(e){return console.error("‚ùå Service Worker update failed:",e),!1}}async unregister(){if(!this.registration)return!1;try{const e=await this.registration.unregister();return console.log("üóëÔ∏è Service Worker unregistered:",e),this.registration=null,e}catch(e){return console.error("‚ùå Service Worker unregistration failed:",e),!1}}async clearCache(){if(!this.registration)return!1;try{const e=this.registration.active;e&&e.postMessage({type:"CLEAR_CACHE"});const t=await caches.keys();return await Promise.all(t.map(i=>caches.delete(i))),console.log("üßπ Service Worker cache cleared"),!0}catch(e){return console.error("‚ùå Failed to clear Service Worker cache:",e),!1}}async getCacheStats(){if(!this.registration)return null;try{const e=this.registration.active;if(!e)return null;const t=new MessageChannel;return new Promise((i,a)=>{t.port1.onmessage=r=>{r.data.error?a(r.data.error):i(r.data)},e.postMessage({type:"GET_CACHE_STATS"},[t.port2])})}catch(e){return console.error("‚ùå Failed to get cache stats:",e),null}}isServiceWorkerSupported(){return this.isSupported}isRegistered(){return!!this.registration}getRegistration(){return this.registration}setEnabled(e){this.isEnabled=e,!e&&this.registration?this.unregister():e&&!this.registration&&this.register()}}class ie{events=new Map;on(e,t){return this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t),()=>{this.off(e,t)}}off(e,t){const i=this.events.get(e);if(!i)return;const a=i.indexOf(t);a!==-1&&i.splice(a,1),i.length===0&&this.events.delete(e)}emit(e,...t){const i=this.events.get(e);i&&i.forEach(a=>{try{a(...t)}catch(r){console.error(`Error in event handler for "${e}":`,r)}})}once(e,t){const i=(...a)=>{this.off(e,i),t(...a)};return this.on(e,i)}hasListeners(e){return this.events.has(e)&&this.events.get(e).length>0}removeAllListeners(e){e?this.events.delete(e):this.events.clear()}getEventNames(){return Array.from(this.events.keys())}}const W=n=>{console.warn("Fallback: redirecting via full page reload",n),window.location.href=n},k=["a","button[data-router-link]"],q=async n=>{try{const e=await fetch(n,{method:"GET"});return e.ok?e:(console.warn(`loadPage: HTTP ${e.status} –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ ${n}`),null)}catch(e){return console.error("loadPage: –æ—à–∏–±–∫–∞ —Å–µ—Ç–∏ –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–∞",e),null}},C=new WeakMap,v={timeouts:[],intervals:[],listeners:[]},ae=EventTarget.prototype.addEventListener,ne=EventTarget.prototype.removeEventListener,re=window.setTimeout,se=window.setInterval,oe=()=>{window.setTimeout=function(a,r,...s){const o=re(a,r,...s);return v.timeouts.push(o),o},window.setInterval=function(a,r,...s){const o=se(a,r,...s);return v.intervals.push(o),o},EventTarget.prototype.addEventListener=function(a,r,s){v.listeners.push({target:this,type:a,handler:r,options:s}),ae.call(this,a,r,s)},EventTarget.prototype.removeEventListener=function(a,r,s){v.listeners=v.listeners.filter(o=>!(o.target===this&&o.type===a&&o.handler===r)),ne.call(this,a,r,s)};const n=Element.prototype.appendChild,e=Element.prototype.prepend,t=Element.prototype.insertBefore,i=Element.prototype.replaceChild;Element.prototype.appendChild=function(a){return a instanceof HTMLScriptElement&&M(a),n.call(this,a)},Element.prototype.prepend=function(...a){for(const r of a)r instanceof HTMLScriptElement&&M(r);e.apply(this,a)},Element.prototype.insertBefore=function(a,r){return a instanceof HTMLScriptElement&&M(a),t.call(this,a,r)},Element.prototype.replaceChild=function(a,r){return a instanceof HTMLScriptElement&&M(a),i.call(this,a,r)},console.log("üß© Sandbox initialized")},M=n=>{const e={timeouts:[],intervals:[],listeners:[],classes:new Set,functions:new Set};C.set(n,e)},ce=n=>{const e=C.get(n);e&&(e.timeouts.forEach(clearTimeout),e.intervals.forEach(clearInterval),e.listeners.forEach(({target:t,type:i,handler:a,options:r})=>{t.removeEventListener(i,a,r)}),C.delete(n),console.log("üßπ Cleaned up script:",n))},le=()=>{document.querySelectorAll("script").forEach(n=>{I(n)||(ce(n),n.remove())}),v.timeouts.forEach(clearTimeout),v.intervals.forEach(clearInterval),v.listeners.forEach(({target:n,type:e,handler:t,options:i})=>{n&&n.removeEventListener(e,t,i)}),console.log("‚úÖ Purged all dynamic scripts and listeners")},he=n=>{let e=5381,t=n.length;for(;t;)e=e*33^n.charCodeAt(--t);return(e>>>0).toString(36)},O=n=>new DOMParser().parseFromString(n,"text/html"),L=new Set,de=n=>{const e=n.getAttribute("src");if(e)return`src:${e}`;const t=n.textContent?.trim();return t?`code:${he(t.replace(/\s+/g," "))}`:null},ue=n=>{L.delete(n)},fe=()=>{L.clear()},$=(n,e="head")=>{if(!n)return;const t=de(n);if(!t)return;const i=pe(n);if(ge(n,t),L.has(t)&&!i)return;const a=D(n),r=e==="body"?document.body:document.head;M(a),r.appendChild(a),L.add(t)},me=n=>{const e=Array.from(n.querySelectorAll("script")),t=[];for(const i of e){const a=D(i);t.push(a),n.removeChild(i)}return t},ge=(n,e)=>{if(e.startsWith("src:")){const t=n.getAttribute("src");if(!t)return;document.querySelectorAll(`script[src="${t}"]`).forEach(i=>i.remove())}else if(e.startsWith("code:")){const t=n.textContent?.trim()?.replace(/\s+/g," ");if(!t)return;document.querySelectorAll("script:not([src])").forEach(i=>{i.textContent?.trim()?.replace(/\s+/g," ")===t&&i.remove()})}ue(e)},D=n=>{const e=document.createElement("script");for(const t of n.getAttributeNames()){const i=n.getAttribute(t);i!==null&&e.setAttribute(t,i)}if(!n.src){const t=n.textContent?.trim();t&&(e.textContent=t)}return e},I=n=>n.hasAttribute("data-keep"),F=n=>n.hasAttribute("data-skip"),pe=n=>n.hasAttribute("data-reload"),_=n=>{const e=document.head,t=Array.from(n.children);for(const i of t){const a=i.tagName.toLowerCase();if(a==="title"){const r=e.querySelector("title");r&&r.remove(),e.appendChild(i.cloneNode(!0));continue}if(a==="script"){if(F(i))continue;$(i,"head");continue}U(i,e)||e.appendChild(i.cloneNode(!0))}for(const i of e.children)I(i)||U(i,n)||i.remove()},U=(n,e)=>{const t=n.tagName.toLowerCase();for(const i of e.children)if(i.tagName.toLowerCase()===t){if(t==="meta"){const a=n,r=i;if(a.getAttribute("name")&&r.getAttribute("name")===a.getAttribute("name")||a.getAttribute("property")&&r.getAttribute("property")===a.getAttribute("property"))return!0}if(t==="link"){const a=n,r=i;if(a.getAttribute("rel")===r.getAttribute("rel")&&a.getAttribute("href")===r.getAttribute("href"))return!0}}return!1},ye=n=>{const e=document.body,t=document.getElementById("avoid");e.innerHTML=n.innerHTML,t&&e.prepend(t)},R=n=>{le(),fe();const e=me(n);for(const t of e)F(t)||I(t)||$(t,"body")},H=async n=>{console.log("–ù–∞–≤–∏–≥–∞—Ü–∏—è –∫:",n),history.pushState({},"",n);const e=await q(n);if(!e){W(n);return}const t=await e.text(),i=O(t);_(i.head),ye(i.body),R(i.body)};window.addEventListener("popstate",()=>{H(window.location.pathname)});let g=null;function ve(n){g=n}const A=n=>{let e=null;if(n.tagName.toLowerCase()==="a"&&n.hasAttribute("href")){const t=n;if(t.target==="_blank")return null;e=t.getAttribute("href")}else n.tagName.toLowerCase()==="button"&&n.hasAttribute("data-router-link")&&(e=n.getAttribute("data-router-link"));if(!e)return null;try{const t=new URL(e,document.location.origin);return t.origin!==document.location.origin?null:t.pathname+t.search+t.hash}catch{return null}},P=n=>{const e=c();let t=n;for(;t;){if(t.hasAttribute(e.general.dataNoRoutingAttribute))return!0;t=t.parentElement}return!1},be=n=>{const e=new WeakMap,t=new WeakMap,i=new WeakMap,a=c(),r=m=>{if(!g)return;const l=m.currentTarget,h=A(l);if(!h||P(l)||!a.prefetch.enabled)return;const u=window.setTimeout(()=>{g&&g.prefetch(h,"low")},a.prefetch.hoverDelay);i.set(l,u)},s=m=>{const l=m.currentTarget,h=i.get(l);if(h&&(window.clearTimeout(h),i.delete(l)),g){const u=A(l);u&&g.cancelPrefetch(u)}},o=m=>{if(!g)return;const l=m.currentTarget,h=A(l);if(!h||P(l)||!a.prefetch.enabled)return;const u=window.setTimeout(()=>{g&&g.prefetch(h,"auto")},a.prefetch.touchDelay);i.set(l,u)},d=m=>{const l=m.currentTarget,h=i.get(l);h&&(window.clearTimeout(h),i.delete(l))},f=m=>l=>{const h=l.currentTarget;if(P(h))return;const u=A(h);u&&(l.preventDefault(),l.stopPropagation(),m(u))},w=m=>{m.forEach(l=>{if(l instanceof HTMLElement&&A(l)&&!P(l)){const u=f(n);if(l.addEventListener("click",u),e.set(l,u),a.prefetch.enabled&&g){const p={mouseenter:r,mouseleave:s,touchstart:o,touchend:d,touchcancel:d};l.addEventListener("mouseenter",p.mouseenter),l.addEventListener("mouseleave",p.mouseleave),l.addEventListener("touchstart",p.touchstart),l.addEventListener("touchend",p.touchend),l.addEventListener("touchcancel",p.touchcancel),t.set(l,p)}}})},E=m=>{m.forEach(l=>{if(l instanceof HTMLElement){const h=e.get(l);h&&(l.removeEventListener("click",h),e.delete(l));const u=t.get(l);u&&(l.removeEventListener("mouseenter",u.mouseenter),l.removeEventListener("mouseleave",u.mouseleave),l.removeEventListener("touchstart",u.touchstart),l.removeEventListener("touchend",u.touchend),l.removeEventListener("touchcancel",u.touchcancel),t.delete(l));const p=i.get(l);p&&(window.clearTimeout(p),i.delete(l))}})},Me=document.querySelectorAll(k.join(", "));w(Me);const Y=new MutationObserver(m=>{m.forEach(l=>{l.addedNodes.forEach(h=>{if(h instanceof HTMLElement){h.matches&&h.matches(k.join(", "))&&w([h]);const u=h.querySelectorAll?.(k.join(", "));u&&w(u)}}),l.removedNodes.forEach(h=>{if(h instanceof HTMLElement){h.matches&&h.matches(k.join(", "))&&E([h]);const u=h.querySelectorAll?.(k.join(", "));u&&E(u)}})})});return Y.observe(document.body,{childList:!0,subtree:!0}),()=>{Y.disconnect();const m=document.querySelectorAll(k.join(", "));E(m),document.querySelectorAll(k.join(", ")).forEach(h=>{if(h instanceof HTMLElement){const u=i.get(h);u&&(window.clearTimeout(u),i.delete(h))}})}};let N=null;function ke(n){N=n}async function we(n,e){const t=document.body,i=document.body.parentElement,a=n.cloneNode(!0);N&&c().animations.enabled?await N.animatePageTransition(t,a,i,{type:e||"fade",duration:c().animations.defaultDuration,onComplete:()=>{B(n),R(a)}}):(i.replaceChild(a,t),B(n),R(a))}function B(n){const e=n.ownerDocument;e&&e.head&&_(e.head)}const Ee=async(n,e)=>{console.log("üé¨ –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –∫:",n,e?`(type: ${e})`:""),history.pushState({},"",n);const t=await q(n);if(!t){W(n);return}const i=await t.text(),a=O(i);await we(a.body,e)},Se=async(n,e={})=>{const t=c();let i=e.type;return i||(e.direction==="backward"?i=t.animations.animationTypes.includes("slide-right")?"slide-right":"fade":i=t.animations.animationTypes.includes("slide-left")?"slide-left":"fade"),Ee(n,i)};let j=0,z=!1;window.addEventListener("popstate",n=>{const e=Date.now();if(e-j<100||z)return;j=e,z=!0;const i=n.state?.direction||(history.length>1?"backward":"forward");Se(window.location.pathname,{direction:i}),setTimeout(()=>{z=!1},100)});class K{cacheManager;prefetchManager;animationManager;serviceWorkerManager;eventEmitter;isInitialized=!1;detachRouteListeners=null;constructor(e){e&&x(e),this.cacheManager=new G,this.prefetchManager=new V(this.cacheManager),this.animationManager=new ee,this.serviceWorkerManager=new te,this.eventEmitter=new ie,this.injectAnimationStyles(),c().general.debug&&(console.log("üîß AdvancedRouter initialized with managers"),console.log("üìä Cache stats:",this.cacheManager.getStats()))}injectAnimationStyles(){if(this.loadAnimationStyles(),document.head.querySelector("#router-animation-styles"))return;const e=document.createElement("style");e.id="router-animation-styles",e.textContent=this.createAnimationStyles(),document.head.appendChild(e)}async init(){if(this.isInitialized){console.warn("‚ö†Ô∏è AdvancedRouter already initialized");return}c().offline.enabled&&await this.serviceWorkerManager.register(),this.attachEnhancedRouteListeners(),this.prefetchInitialLinks(),this.isInitialized=!0,this.eventEmitter.emit("init"),console.log("üöÄ AdvancedRouter initialized with all features")}attachEnhancedRouteListeners(){c();const e=t=>{this.navigateTo(t)};ve(this.prefetchManager),ke(this.animationManager),this.detachRouteListeners=be(e)}prefetchInitialLinks(){c().prefetch.enabled&&(setTimeout(()=>{this.prefetchManager.prefetchNavigationLinks()},1e3),window.addEventListener("load",()=>{setTimeout(()=>{this.prefetchManager.prefetchNavigationLinks()},500)}))}async navigateTo(e,t={}){if(!this.isInitialized){console.warn("‚ö†Ô∏è Router not initialized, using base navigation"),H(e);return}this.eventEmitter.emit("navigation:start",e,t);try{const i=this.cacheManager.get(e);i?await this.loadFromCache(e,i,t):await this.loadFromServer(e,t),this.eventEmitter.emit("navigation:complete",e,t),this.prefetchManager.prefetchNavigationLinks(document.body)}catch(i){console.error("‚ùå Navigation failed:",i),this.eventEmitter.emit("navigation:error",e,i,t),H(e),setTimeout(()=>{this.attachEnhancedRouteListeners()},100)}}async loadFromCache(e,t,i={}){c().general.debug&&console.log(`üéØ Loading from cache: ${e}`),this.eventEmitter.emit("cache:hit",e);const r=new DOMParser().parseFromString(t.html,"text/html");await this.updatePage(r,e,!0,i)}async loadFromServer(e,t={}){c().general.debug&&console.log(`üåê Loading from server: ${e}`),this.eventEmitter.emit("cache:miss",e);try{const i=await fetch(e,{method:"GET"});if(!i.ok)throw new Error(`HTTP ${i.status}`);const a=await i.text(),r={};i.headers.forEach((d,f)=>{r[f]=d}),this.cacheManager.set(e,a,r);const o=new DOMParser().parseFromString(a,"text/html");await this.updatePage(o,e,!1,t)}catch(i){throw i}}async updatePage(e,t,i,a={}){this.detachRouteListeners&&(this.detachRouteListeners(),this.detachRouteListeners=null),history.pushState({},"",t);const r=document.body,s=e.body.cloneNode(!0),o=document.body.parentElement,d=a.skipAnimation?void 0:a.animationType||"fade";if(!c().animations.enabled||a.skipAnimation||!d){o.replaceChild(s,r),this.updateHead(e.head),this.runScripts(s),this.attachEnhancedRouteListeners(),this.eventEmitter.emit("page:updated",t,i,{animated:!1});return}await this.animationManager.animatePageTransition(r,s,o,{type:d,duration:c().animations.defaultDuration,onComplete:()=>{this.updateHead(e.head),this.runScripts(s),this.attachEnhancedRouteListeners(),this.eventEmitter.emit("page:updated",t,i,{animated:!0,animationType:d})}})}updateHead(e){const t=document.head,i=e.querySelector("title"),a=t.querySelector("title");i&&a&&(a.textContent=i.textContent),["description","keywords","viewport"].forEach(s=>{const o=e.querySelector(`meta[name="${s}"]`),d=t.querySelector(`meta[name="${s}"]`);o&&d?d.setAttribute("content",o.getAttribute("content")||""):o&&!d&&t.appendChild(o.cloneNode(!0))})}runScripts(e){e.querySelectorAll("script").forEach(i=>{const a=document.createElement("script");Array.from(i.attributes).forEach(r=>{a.setAttribute(r.name,r.value)}),!i.src&&i.textContent&&(a.textContent=i.textContent),document.body.appendChild(a),i.remove()})}getCacheManager(){return this.cacheManager}getPrefetchManager(){return this.prefetchManager}getAnimationManager(){return this.animationManager}getServiceWorkerManager(){return this.serviceWorkerManager}on(e,t){return this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}isRouterInitialized(){return this.isInitialized}clearCache(){this.cacheManager.clear(),this.eventEmitter.emit("cache:cleared")}clearPrefetchQueue(){this.prefetchManager.clearQueue(),this.eventEmitter.emit("prefetch:cleared")}clearNavigationHistory(){this.prefetchManager.clearNavigationHistory(),this.eventEmitter.emit("navigation:history:cleared")}getIntelligentPrefetchStats(){return this.prefetchManager.getIntelligentPrefetch().getStats()}setIntelligentPrefetchEnabled(e){this.prefetchManager.getIntelligentPrefetch().setEnabled(e),this.eventEmitter.emit("intelligent:prefetch:enabled",e)}setOfflineModeEnabled(e){this.serviceWorkerManager.setEnabled(e),this.eventEmitter.emit("offline:mode:enabled",e)}async updateServiceWorker(){const e=await this.serviceWorkerManager.update();return this.eventEmitter.emit("service:worker:updated",e),e}async clearServiceWorkerCache(){const e=await this.serviceWorkerManager.clearCache();return this.eventEmitter.emit("service:worker:cache:cleared",e),e}async getServiceWorkerCacheStats(){return await this.serviceWorkerManager.getCacheStats()}isOfflineModeSupported(){return this.serviceWorkerManager.isServiceWorkerSupported()}isOfflineModeEnabled(){return this.serviceWorkerManager.isRegistered()}setAnimationsEnabled(e){const t=c();x({animations:{...t.animations,enabled:e}}),this.eventEmitter.emit("animations:enabled",e)}setDefaultAnimationType(e){const t=c();t.animations.animationTypes.includes(e)?(x({animations:{...t.animations,defaultType:e}}),this.eventEmitter.emit("animation:type:changed",e)):console.warn(`‚ö†Ô∏è Animation type "${e}" is not available`)}getAvailableAnimationTypes(){return c().animations.animationTypes}navigateWithAnimation(e,t,i=!1){return this.navigateTo(e,{animationType:t,skipAnimation:i})}navigateWithoutAnimation(e){return this.navigateTo(e,{skipAnimation:!0})}areAnimationsEnabled(){return c().animations.enabled}isAnimationInProgress(){return this.animationManager.isAnimationInProgress()}async cancelCurrentAnimation(){await this.animationManager.cancelCurrentAnimation(),this.eventEmitter.emit("animation:cancelled")}loadAnimationStyles(){if(document.head.querySelector('link[href*="animations.css"]'))return;const e=document.createElement("link");e.rel="stylesheet",e.href="/animations.css",e.onload=()=>console.log("‚úÖ Animation styles loaded"),e.onerror=()=>console.warn("‚ö†Ô∏è Failed to load animation styles"),document.head.appendChild(e)}createAnimationStyles(){return`
      /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ animations.css */
      .router-animation-old,
      .router-animation-new {
        will-change: transform, opacity;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
      }

      /* –°—Ç–∏–ª–∏ –¥–ª—è –º–∞—Å–∫–æ–≤—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π */
      .router-mask-animation {
        mask-size: 100% 100%;
        mask-repeat: no-repeat;
        mask-position: center;
        -webkit-mask-size: 100% 100%;
        -webkit-mask-repeat: no-repeat;
        -webkit-mask-position: center;
      }

      @media (prefers-reduced-motion: reduce) {
        .router-animation-old,
        .router-animation-new {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    `}}const Q=new K({general:{debug:process.env.NODE_ENV==="development",dataNoRoutingAttribute:"data-no-routing"}});oe(),Q.init().then(()=>{console.log("‚úÖ AdvancedRouter fully initialized")}).catch(n=>{console.error("‚ùå Failed to initialize AdvancedRouter:",n)}),b.AdvancedRouter=K,b.router=Q,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})}));
