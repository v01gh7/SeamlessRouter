(function(w,T){typeof exports=="object"&&typeof module<"u"?T(exports):typeof define=="function"&&define.amd?define(["exports"],T):(w=typeof globalThis<"u"?globalThis:w||self,T(w.SeamlessRouter={}))})(this,(function(w){"use strict";let v={...{prefetch:{enabled:!0,mobileThreshold:768,desktopPrefetchAll:!0,mobilePrefetchLimit:3,navigationExtraPages:2,hoverDelay:300,touchDelay:100},cache:{enabled:!0,maxSizeMB:30,maxEntries:100,alwaysCache:["/","/index.html","/contacts.html","/about.html"],checkLastModified:!0,ttlHours:24},offline:{enabled:!0,showOfflineIndicator:!0,offlinePageUrl:"/offline.html",cacheMedia:!1},animations:{enabled:!0,defaultDuration:300,respectReducedMotion:!0,animationTypes:["fade","slide-left","slide-right","slide-up","slide-down","collapse","diagonal"],defaultType:"fade"},general:{debug:process.env.NODE_ENV==="development",dataNoRoutingAttribute:"data-no-routing"}}};function l(){return{...v}}function x(a){v={...v,...a,prefetch:{...v.prefetch,...a.prefetch},cache:{...v.cache,...a.cache},offline:{...v.offline,...a.offline},animations:{...v.animations,...a.animations},general:{...v.general,...a.general}}}function S(){return window.innerWidth<l().prefetch.mobileThreshold}function G(){const a=l();return a.prefetch.enabled?S()?a.prefetch.mobilePrefetchLimit:a.prefetch.desktopPrefetchAll?1/0:a.prefetch.mobilePrefetchLimit:0}class K{cache=new Map;stats={totalEntries:0,totalSize:0,hits:0,misses:0,hitRate:0};isSupported=!1;constructor(){this.checkSupport(),this.loadFromStorage()}checkSupport(){try{const e="__router_cache_test__";localStorage.setItem(e,"test"),localStorage.removeItem(e),this.isSupported=!0}catch{console.warn("‚ö†Ô∏è localStorage not supported, using memory cache only"),this.isSupported=!1}}loadFromStorage(){if(this.isSupported)try{const e=localStorage.getItem("router_cache");if(e){const t=JSON.parse(e);this.cache=new Map(t.cache||[]),this.stats=t.stats||this.stats,this.cleanupExpired(),l().general.debug&&console.log("üì¶ Cache loaded from storage:",this.stats)}}catch(e){console.error("‚ùå Error loading cache from storage:",e),this.clear()}}saveToStorage(){if(this.isSupported)try{const e={cache:Array.from(this.cache.entries()),stats:this.stats,timestamp:Date.now()};localStorage.setItem("router_cache",JSON.stringify(e))}catch(e){console.error("‚ùå Error saving cache to storage:",e)}}cleanupExpired(){const e=l(),t=Date.now(),i=e.cache.ttlHours*60*60*1e3;let r=0;for(const[n,o]of this.cache.entries())e.cache.alwaysCache.includes(n)||t-o.timestamp>i&&(this.cache.delete(n),this.stats.totalSize-=o.size,r++);this.stats.totalEntries=this.cache.size,r>0&&l().general.debug&&console.log(`üßπ Cleaned up ${r} expired cache entries`)}shouldUpdateEntry(e,t,i){const r=this.cache.get(e);return!!(!r||t&&r.lastModified!==t||i&&r.etag!==i)}calculateSize(e,t){let i=0;return i+=new Blob([e]).size,i+=JSON.stringify(t).length*2,i+=100,i}checkLimits(){const e=l(),t=e.cache.maxSizeMB*1024*1024,i=e.cache.maxEntries;for(;(this.stats.totalSize>t||this.cache.size>i)&&this.cache.size>0;){let r=null,n=Date.now();for(const[o,s]of this.cache.entries())e.cache.alwaysCache.includes(o)||s.timestamp<n&&(n=s.timestamp,r=o);if(r){const o=this.cache.get(r);this.cache.delete(r),this.stats.totalSize-=o.size,this.stats.totalEntries--,l().general.debug&&console.log(`üóëÔ∏è Removed old cache entry: ${r}`)}else break}}set(e,t,i={}){if(!l().cache.enabled)return!1;const r=l(),n=i["last-modified"],o=i.etag;if(!this.shouldUpdateEntry(e,n,o))return r.general.debug&&console.log(`‚ôªÔ∏è Cache entry not changed: ${e}`),!1;const s=this.cache.get(e);s&&(this.stats.totalSize-=s.size);const d=this.calculateSize(t,i),m={url:e,html:t,headers:i,timestamp:Date.now(),size:d,lastModified:n,etag:o};return this.cache.set(e,m),this.stats.totalSize+=d,this.stats.totalEntries=this.cache.size,this.checkLimits(),this.saveToStorage(),r.general.debug&&console.log(`üíæ Cache set: ${e} (${Math.round(d/1024)}KB)`),!0}get(e){if(!l().cache.enabled)return null;const t=this.cache.get(e);return t?(this.stats.hits++,this.updateHitRate(),l().general.debug&&console.log(`üéØ Cache hit: ${e}`),t):(this.stats.misses++,this.updateHitRate(),l().general.debug&&console.log(`‚ùå Cache miss: ${e}`),null)}has(e){return this.cache.has(e)}delete(e){const t=this.cache.get(e);return t?(this.cache.delete(e),this.stats.totalSize-=t.size,this.stats.totalEntries--,this.saveToStorage(),l().general.debug&&console.log(`üóëÔ∏è Cache deleted: ${e}`),!0):!1}clear(){const e=this.cache.size;this.cache.clear(),this.stats={totalEntries:0,totalSize:0,hits:0,misses:0,hitRate:0},this.isSupported&&localStorage.removeItem("router_cache"),l().general.debug&&console.log(`üßπ Cache cleared (${e} entries removed)`)}updateHitRate(){const e=this.stats.hits+this.stats.misses;this.stats.hitRate=e>0?this.stats.hits/e:0}getStats(){return{...this.stats}}getUrls(){return Array.from(this.cache.keys())}getSizeMB(){return Math.round(this.stats.totalSize/(1024*1024)*100)/100}isCacheSupported(){return this.isSupported}}class J{prefetchManager;navigationHistory=[];maxHistorySize=100;isEnabled=!0;constructor(e){this.prefetchManager=e,this.isEnabled=l().prefetch.enabled,this.loadNavigationHistory(),this.setupNavigationTracking()}loadNavigationHistory(){try{const e=localStorage.getItem("router_navigation_history");e&&(this.navigationHistory=JSON.parse(e))}catch(e){console.warn("Failed to load navigation history:",e),this.navigationHistory=[]}}saveNavigationHistory(){try{localStorage.setItem("router_navigation_history",JSON.stringify(this.navigationHistory))}catch(e){console.warn("Failed to save navigation history:",e)}}setupNavigationTracking(){if(!this.isEnabled)return;let e=window.location.pathname;const t=()=>{const n=window.location.pathname;n!==e&&(this.recordNavigation(e,n),e=n,this.prefetchBasedOnPatterns(n))};window.addEventListener("popstate",t);const i=history.pushState,r=history.replaceState;history.pushState=function(...n){i.apply(this,n),setTimeout(t,0)},history.replaceState=function(...n){r.apply(this,n),setTimeout(t,0)}}recordNavigation(e,t){const i=this.navigationHistory.find(r=>r.from===e&&r.to===t);i?(i.count++,i.timestamp=Date.now()):(this.navigationHistory.push({from:e,to:t,count:1,timestamp:Date.now()}),this.navigationHistory.length>this.maxHistorySize&&(this.navigationHistory.sort((r,n)=>n.timestamp-r.timestamp),this.navigationHistory=this.navigationHistory.slice(0,this.maxHistorySize))),this.saveNavigationHistory()}prefetchBasedOnPatterns(e){if(!this.isEnabled)return;const t=l(),i=S(),r=this.getLikelyNextPages(e);if(r.length===0)return;let n;i?n=t.prefetch.mobilePrefetchLimit:n=t.prefetch.desktopPrefetchAll?r.length:t.prefetch.mobilePrefetchLimit;const o=r.slice(0,n);o.forEach(s=>{this.prefetchManager.prefetch(s.url,"auto")}),t.general.debug&&o.length>0&&console.log(`üéØ Intelligent prefetch for ${e}:`,o.map(s=>s.url))}getLikelyNextPages(e){const t=this.navigationHistory.filter(r=>r.from===e);return t.length===0?[]:t.map(r=>{const n=r.count,o=Date.now()-r.timestamp,s=Math.max(0,1-o/(720*60*60*1e3)),d=n*(1+s);return{url:r.to,probability:d}}).sort((r,n)=>n.probability-r.probability)}prefetchTopLevelPages(){if(!this.isEnabled)return;const e=l(),t=S(),i=new Set;this.navigationHistory.forEach(s=>{i.add(s.from),i.add(s.to)}),e.cache.alwaysCache.forEach(s=>{i.add(s)});const r=Array.from(i);if(r.length===0)return;let n;t?n=Math.min(e.prefetch.mobilePrefetchLimit,r.length):n=e.prefetch.desktopPrefetchAll?r.length:e.prefetch.mobilePrefetchLimit;const o=r.slice(0,n);o.forEach(s=>{this.prefetchManager.prefetch(s,"low")}),e.general.debug&&o.length>0&&console.log("üè† Prefetching top-level pages:",o)}prefetchNavigationExtraPages(e=document.body){if(!this.isEnabled)return;const t=l(),i=t.prefetch.navigationExtraPages;if(i<=0)return;const r=e.querySelectorAll('a[href*="page"], a[href*="p="], a[rel="next"], a[rel="prev"]'),n=[];if(r.forEach(s=>{const d=s.getAttribute("href");if(d&&!(d.startsWith("#")||d.startsWith("mailto:")||d.startsWith("tel:")||d.includes("://")))try{const m=new URL(d,window.location.origin);m.origin===window.location.origin&&n.push(m.pathname+m.search+m.hash)}catch{}}),n.length===0)return;const o=n.slice(0,i);o.forEach(s=>{this.prefetchManager.prefetch(s,"auto")}),t.general.debug&&o.length>0&&console.log(`üìÑ Prefetching ${o.length} extra navigation pages`)}clearHistory(){this.navigationHistory=[],localStorage.removeItem("router_navigation_history"),l().general.debug&&console.log("üßπ Navigation history cleared")}getStats(){return{totalPatterns:this.navigationHistory.length,uniqueFromPages:new Set(this.navigationHistory.map(e=>e.from)).size,uniqueToPages:new Set(this.navigationHistory.map(e=>e.to)).size,totalTransitions:this.navigationHistory.reduce((e,t)=>e+t.count,0)}}setEnabled(e){this.isEnabled=e}}class V{cacheManager;intelligentPrefetch;queue=[];activeRequests=new Set;maxConcurrent=3;isEnabled=!0;constructor(e){this.cacheManager=e,this.intelligentPrefetch=new J(this),this.isEnabled=l().prefetch.enabled,this.maxConcurrent=S()?2:3}async prefetch(e,t="low"){if(!this.isEnabled||this.activeRequests.has(e)||this.cacheManager.has(e))return!1;const i={url:e,priority:t,timestamp:Date.now(),controller:new AbortController};return this.addToQueue(i),this.processQueue(),!0}addToQueue(e){const t=this.queue.findIndex(i=>this.getPriorityValue(i.priority)<this.getPriorityValue(e.priority));t===-1?this.queue.push(e):this.queue.splice(t,0,e)}getPriorityValue(e){switch(e){case"high":return 0;case"auto":return 1;case"low":return 2;default:return 2}}async processQueue(){for(;this.activeRequests.size<this.maxConcurrent&&this.queue.length>0;){const e=this.queue.shift();if(!e)break;await this.executePrefetch(e)}}async executePrefetch(e){this.activeRequests.add(e.url);try{const t=await fetch(e.url,{method:"GET",priority:e.priority,signal:e.controller?.signal});if(!t.ok)throw new Error(`HTTP ${t.status}`);const i=await t.text(),r={};t.headers.forEach((n,o)=>{r[o]=n}),this.cacheManager.set(e.url,i,r),l().general.debug&&console.log(`‚úÖ Prefetched: ${e.url} (${e.priority})`)}catch(t){t instanceof Error&&t.name!=="AbortError"&&console.warn(`‚ö†Ô∏è Prefetch failed for ${e.url}:`,t)}finally{this.activeRequests.delete(e.url),this.processQueue()}}cancelPrefetch(e){const t=this.queue.findIndex(i=>i.url===e);if(t!==-1)return this.queue[t].controller?.abort(),this.queue.splice(t,1),!0;if(this.activeRequests.has(e)){for(const i of this.queue)if(i.url===e&&i.controller)return i.controller.abort(),this.activeRequests.delete(e),!0}return!1}prefetchMultiple(e,t="low"){if(!this.isEnabled)return;const i=G();(i===1/0?e:e.slice(0,i)).forEach(n=>{this.prefetch(n,t)})}prefetchNavigationLinks(e=document.body){if(!this.isEnabled)return;const t=l(),i=this.extractNavigationLinks(e);if(i.length>0){const r=S()?"low":"auto";this.prefetchMultiple(i,r),t.general.debug&&console.log(`üîó Prefetching ${i.length} navigation links`)}this.intelligentPrefetch.prefetchTopLevelPages(),this.intelligentPrefetch.prefetchNavigationExtraPages(e)}extractNavigationLinks(e){const t=[],i=l(),r=e.querySelectorAll(`a[href]:not([${i.general.dataNoRoutingAttribute}])`);for(const n of r){const o=n.getAttribute("href");if(o&&!(o.startsWith("#")||o.startsWith("mailto:")||o.startsWith("tel:")||o.includes("://")))try{const s=new URL(o,window.location.origin);s.origin===window.location.origin&&t.push(s.pathname+s.search+s.hash)}catch{}}return t}clearQueue(){this.queue.forEach(e=>{e.controller?.abort()});for(const e of this.activeRequests)this.cancelPrefetch(e);this.queue=[],this.activeRequests.clear(),l().general.debug&&console.log("üßπ Prefetch queue cleared")}setEnabled(e){this.isEnabled=e,e||this.clearQueue()}getStats(){return{queueLength:this.queue.length,activeRequests:this.activeRequests.size,maxConcurrent:this.maxConcurrent,isEnabled:this.isEnabled,intelligentPrefetch:this.intelligentPrefetch.getStats()}}getIntelligentPrefetch(){return this.intelligentPrefetch}clearNavigationHistory(){this.intelligentPrefetch.clearHistory()}}class Z{isAnimating=!1;currentAnimation=null;prefersReducedMotion=!1;constructor(){if(this.checkReducedMotion(),window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion: reduce)");this.prefersReducedMotion=e.matches,e.addEventListener("change",t=>{this.prefersReducedMotion=t.matches})}}checkReducedMotion(){window.matchMedia&&(this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches)}shouldAnimate(e){const t=l();return!(!t.animations.enabled||t.animations.respectReducedMotion&&this.prefersReducedMotion)}async animatePageTransition(e,t,i,r={}){if(!this.shouldAnimate(r)){i.replaceChild(t,e),r.onComplete?.();return}this.isAnimating&&await this.cancelCurrentAnimation(),this.isAnimating=!0,r.onStart?.();const n=l(),o=r.type||"fade",s=r.duration||n.animations.defaultDuration,d=r.easing||"ease-in-out";try{await this.executeAnimation(e,t,i,o,s,d,r)}catch(m){console.error("Animation error:",m),i.replaceChild(t,e)}finally{this.isAnimating=!1}}async executeAnimation(e,t,i,r,n,o,s){this.prepareElements(e,t,r),i.appendChild(t);const d=this.getKeyframes(r,e,t),m=e.animate(d,{duration:n,easing:o,fill:"forwards"});this.currentAnimation=m;const M=this.getNewContentKeyframes(r),L=t.animate(M,{duration:n,easing:o,fill:"forwards"});await Promise.all([m.finished,L.finished]),this.finishTransition(e,t,i),s.onComplete?.(),this.currentAnimation=null}prepareElements(e,t,i){const r={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"};Object.assign(e.style,r),Object.assign(t.style,{...r,opacity:"0",visibility:"hidden"}),e.classList.add("router-animation-old"),t.classList.add("router-animation-new"),e.classList.add(`router-animation-${i}`),t.classList.add(`router-animation-${i}`)}getKeyframes(e,t,i){switch(e){case"fade":return[{opacity:1,visibility:"visible"},{opacity:0,visibility:"hidden"}];case"slide-left":return[{transform:"translateX(0)",opacity:1,visibility:"visible"},{transform:"translateX(-100%)",opacity:0,visibility:"hidden"}];case"slide-right":return[{transform:"translateX(0)",opacity:1,visibility:"visible"},{transform:"translateX(100%)",opacity:0,visibility:"hidden"}];case"slide-up":return[{transform:"translateY(0)",opacity:1,visibility:"visible"},{transform:"translateY(-100%)",opacity:0,visibility:"hidden"}];case"slide-down":return[{transform:"translateY(0)",opacity:1,visibility:"visible"},{transform:"translateY(100%)",opacity:0,visibility:"hidden"}];case"collapse":return[{transform:"scale(1)",opacity:1,visibility:"visible"},{transform:"scale(0.8)",opacity:0,visibility:"hidden"}];case"diagonal":return[{transform:"translate(0, 0) scale(1)",opacity:1,visibility:"visible"},{transform:"translate(100%, 100%) scale(0.8)",opacity:0,visibility:"hidden"}];default:return[{opacity:1,visibility:"visible"},{opacity:0,visibility:"hidden"}]}}getNewContentKeyframes(e){switch(e){case"fade":return[{opacity:0,visibility:"hidden"},{opacity:1,visibility:"visible"}];case"slide-left":return[{transform:"translateX(100%)",opacity:0,visibility:"hidden"},{transform:"translateX(0)",opacity:1,visibility:"visible"}];case"slide-right":return[{transform:"translateX(-100%)",opacity:0,visibility:"hidden"},{transform:"translateX(0)",opacity:1,visibility:"visible"}];case"slide-up":return[{transform:"translateY(100%)",opacity:0,visibility:"hidden"},{transform:"translateY(0)",opacity:1,visibility:"visible"}];case"slide-down":return[{transform:"translateY(-100%)",opacity:0,visibility:"hidden"},{transform:"translateY(0)",opacity:1,visibility:"visible"}];case"collapse":return[{transform:"scale(1.2)",opacity:0,visibility:"hidden"},{transform:"scale(1)",opacity:1,visibility:"visible"}];case"diagonal":return[{transform:"translate(-100%, -100%) scale(1.2)",opacity:0,visibility:"hidden"},{transform:"translate(0, 0) scale(1)",opacity:1,visibility:"visible"}];default:return[{opacity:0,visibility:"hidden"},{opacity:1,visibility:"visible"}]}}finishTransition(e,t,i){i.removeChild(e),t.style.cssText="",t.classList.remove("router-animation-new","router-animation-old"),Array.from(t.classList).filter(n=>n.startsWith("router-animation-")).forEach(n=>t.classList.remove(n))}async cancelCurrentAnimation(){this.currentAnimation&&(this.currentAnimation.cancel(),this.currentAnimation=null),this.isAnimating=!1}isAnimationInProgress(){return this.isAnimating}getAvailableAnimationTypes(){return l().animations.animationTypes}static createAnimationStyles(){return`
      /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
      .router-animation-old,
      .router-animation-new {
        will-change: transform, opacity;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
      }

      @media (prefers-reduced-motion: reduce) {
        .router-animation-old,
        .router-animation-new {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    `}}class ee{isSupported=!1;registration=null;isEnabled=!0;constructor(){this.isSupported="serviceWorker"in navigator,this.isEnabled=l().offline.enabled}async register(){if(!this.isSupported||!this.isEnabled)return console.warn("‚ö†Ô∏è Service Worker not supported or disabled"),!1;try{return this.registration=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),console.log("‚úÖ Service Worker registered:",this.registration),this.setupUpdateListeners(),this.setupNetworkMonitoring(),!0}catch(e){return console.error("‚ùå Service Worker registration failed:",e),!1}}setupUpdateListeners(){this.registration&&(this.registration.addEventListener("updatefound",()=>{const e=this.registration.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&(navigator.serviceWorker.controller?(console.log("üîÑ New Service Worker available"),this.showUpdateNotification()):console.log("‚úÖ Service Worker installed for the first time"))})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("üéÆ Service Worker controller changed")}))}showUpdateNotification(){console.log("üì¢ New version available. Refresh to update."),l().offline.showOfflineIndicator&&(this.showToast("New version available. Refreshing..."),setTimeout(()=>{window.location.reload()},3e3))}setupNetworkMonitoring(){if(!l().offline.showOfflineIndicator)return;const e=()=>{navigator.onLine?(this.hideOfflineIndicator(),console.log("üåê Online")):(this.showOfflineIndicator(),console.log("üì¥ Offline"))};window.addEventListener("online",e),window.addEventListener("offline",e),e()}showOfflineIndicator(){let e=document.getElementById("offline-indicator");e||(e=document.createElement("div"),e.id="offline-indicator",e.innerHTML=`
        <div style="
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: #f44336;
          color: white;
          text-align: center;
          padding: 10px;
          z-index: 9999;
          font-family: sans-serif;
          font-size: 14px;
        ">
          ‚ö†Ô∏è You are offline. Some features may be unavailable.
        </div>
      `,document.body.appendChild(e)),e.style.display="block"}hideOfflineIndicator(){const e=document.getElementById("offline-indicator");e&&(e.style.display="none")}showToast(e){const t=document.createElement("div");t.innerHTML=`
      <div style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #333;
        color: white;
        padding: 12px 20px;
        border-radius: 4px;
        z-index: 10000;
        font-family: sans-serif;
        font-size: 14px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      ">
        ${e}
      </div>
    `,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},3e3)}async update(){if(!this.registration)return!1;try{return await this.registration.update(),console.log("üîÑ Service Worker update triggered"),!0}catch(e){return console.error("‚ùå Service Worker update failed:",e),!1}}async unregister(){if(!this.registration)return!1;try{const e=await this.registration.unregister();return console.log("üóëÔ∏è Service Worker unregistered:",e),this.registration=null,e}catch(e){return console.error("‚ùå Service Worker unregistration failed:",e),!1}}async clearCache(){if(!this.registration)return!1;try{const e=this.registration.active;e&&e.postMessage({type:"CLEAR_CACHE"});const t=await caches.keys();return await Promise.all(t.map(i=>caches.delete(i))),console.log("üßπ Service Worker cache cleared"),!0}catch(e){return console.error("‚ùå Failed to clear Service Worker cache:",e),!1}}async getCacheStats(){if(!this.registration)return null;try{const e=this.registration.active;if(!e)return null;const t=new MessageChannel;return new Promise((i,r)=>{t.port1.onmessage=n=>{n.data.error?r(n.data.error):i(n.data)},e.postMessage({type:"GET_CACHE_STATS"},[t.port2])})}catch(e){return console.error("‚ùå Failed to get cache stats:",e),null}}isServiceWorkerSupported(){return this.isSupported}isRegistered(){return!!this.registration}getRegistration(){return this.registration}setEnabled(e){this.isEnabled=e,!e&&this.registration?this.unregister():e&&!this.registration&&this.register()}}class te{events=new Map;on(e,t){return this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t),()=>{this.off(e,t)}}off(e,t){const i=this.events.get(e);if(!i)return;const r=i.indexOf(t);r!==-1&&i.splice(r,1),i.length===0&&this.events.delete(e)}emit(e,...t){const i=this.events.get(e);i&&i.forEach(r=>{try{r(...t)}catch(n){console.error(`Error in event handler for "${e}":`,n)}})}once(e,t){const i=(...r)=>{this.off(e,i),t(...r)};return this.on(e,i)}hasListeners(e){return this.events.has(e)&&this.events.get(e).length>0}removeAllListeners(e){e?this.events.delete(e):this.events.clear()}getEventNames(){return Array.from(this.events.keys())}}const q=a=>{console.warn("Fallback: redirecting via full page reload",a),window.location.href=a},E=["a","button[data-router-link]"],O=async a=>{try{const e=await fetch(a,{method:"GET"});return e.ok?e:(console.warn(`loadPage: HTTP ${e.status} –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ ${a}`),null)}catch(e){return console.error("loadPage: –æ—à–∏–±–∫–∞ —Å–µ—Ç–∏ –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–∞",e),null}},R=new WeakMap,b={timeouts:[],intervals:[],listeners:[]},ie=EventTarget.prototype.addEventListener,re=EventTarget.prototype.removeEventListener,ae=window.setTimeout,ne=window.setInterval,oe=()=>{window.setTimeout=function(r,n,...o){const s=ae(r,n,...o);return b.timeouts.push(s),s},window.setInterval=function(r,n,...o){const s=ne(r,n,...o);return b.intervals.push(s),s},EventTarget.prototype.addEventListener=function(r,n,o){b.listeners.push({target:this,type:r,handler:n,options:o}),ie.call(this,r,n,o)},EventTarget.prototype.removeEventListener=function(r,n,o){b.listeners=b.listeners.filter(s=>!(s.target===this&&s.type===r&&s.handler===n)),re.call(this,r,n,o)};const a=Element.prototype.appendChild,e=Element.prototype.prepend,t=Element.prototype.insertBefore,i=Element.prototype.replaceChild;Element.prototype.appendChild=function(r){return r instanceof HTMLScriptElement&&k(r),a.call(this,r)},Element.prototype.prepend=function(...r){for(const n of r)n instanceof HTMLScriptElement&&k(n);e.apply(this,r)},Element.prototype.insertBefore=function(r,n){return r instanceof HTMLScriptElement&&k(r),t.call(this,r,n)},Element.prototype.replaceChild=function(r,n){return r instanceof HTMLScriptElement&&k(r),i.call(this,r,n)},console.log("üß© Sandbox initialized")},k=a=>{const e={timeouts:[],intervals:[],listeners:[],classes:new Set,functions:new Set};R.set(a,e)},se=a=>{const e=R.get(a);e&&(e.timeouts.forEach(clearTimeout),e.intervals.forEach(clearInterval),e.listeners.forEach(({target:t,type:i,handler:r,options:n})=>{t.removeEventListener(i,r,n)}),R.delete(a),console.log("üßπ Cleaned up script:",a))},ce=()=>{document.querySelectorAll("script").forEach(a=>{N(a)||(se(a),a.remove())}),b.timeouts.forEach(clearTimeout),b.intervals.forEach(clearInterval),b.listeners.forEach(({target:a,type:e,handler:t,options:i})=>{a&&a.removeEventListener(e,t,i)}),console.log("‚úÖ Purged all dynamic scripts and listeners")},le=a=>{let e=5381,t=a.length;for(;t;)e=e*33^a.charCodeAt(--t);return(e>>>0).toString(36)},$=a=>new DOMParser().parseFromString(a,"text/html"),P=new Set,he=a=>{const e=a.getAttribute("src");if(e)return`src:${e}`;const t=a.textContent?.trim();return t?`code:${le(t.replace(/\s+/g," "))}`:null},ue=a=>{P.delete(a)},de=()=>{P.clear()},D=(a,e="head")=>{if(!a)return;const t=he(a);if(!t)return;const i=ge(a);if(me(a,t),P.has(t)&&!i)return;const r=F(a),n=e==="body"?document.body:document.head;k(r),n.appendChild(r),P.add(t)},fe=a=>{const e=Array.from(a.querySelectorAll("script")),t=[];for(const i of e){const r=F(i);t.push(r),a.removeChild(i)}return t},me=(a,e)=>{if(e.startsWith("src:")){const t=a.getAttribute("src");if(!t)return;document.querySelectorAll(`script[src="${t}"]`).forEach(i=>i.remove())}else if(e.startsWith("code:")){const t=a.textContent?.trim()?.replace(/\s+/g," ");if(!t)return;document.querySelectorAll("script:not([src])").forEach(i=>{i.textContent?.trim()?.replace(/\s+/g," ")===t&&i.remove()})}ue(e)},F=a=>{const e=document.createElement("script");for(const t of a.getAttributeNames()){const i=a.getAttribute(t);i!==null&&e.setAttribute(t,i)}if(!a.src){const t=a.textContent?.trim();t&&(e.textContent=t)}return e},N=a=>a.hasAttribute("data-keep"),_=a=>a.hasAttribute("data-skip"),ge=a=>a.hasAttribute("data-reload"),U=a=>{const e=document.head,t=Array.from(a.children);for(const i of t){const r=i.tagName.toLowerCase();if(r==="title"){const n=e.querySelector("title");n&&n.remove(),e.appendChild(i.cloneNode(!0));continue}if(r==="script"){if(_(i))continue;D(i,"head");continue}X(i,e)||e.appendChild(i.cloneNode(!0))}for(const i of e.children)N(i)||X(i,a)||i.remove()},X=(a,e)=>{const t=a.tagName.toLowerCase();for(const i of e.children)if(i.tagName.toLowerCase()===t){if(t==="meta"){const r=a,n=i;if(r.getAttribute("name")&&n.getAttribute("name")===r.getAttribute("name")||r.getAttribute("property")&&n.getAttribute("property")===r.getAttribute("property"))return!0}if(t==="link"){const r=a,n=i;if(r.getAttribute("rel")===n.getAttribute("rel")&&r.getAttribute("href")===n.getAttribute("href"))return!0}}return!1},pe=a=>{const e=document.body,t=document.getElementById("avoid");e.innerHTML=a.innerHTML,t&&e.prepend(t)},H=a=>{ce(),de();const e=fe(a);for(const t of e)_(t)||N(t)||D(t,"body")},z=async a=>{console.log("–ù–∞–≤–∏–≥–∞—Ü–∏—è –∫:",a),history.pushState({},"",a);const e=await O(a);if(!e){q(a);return}const t=await e.text(),i=$(t);U(i.head),pe(i.body),H(i.body)};window.addEventListener("popstate",()=>{z(window.location.pathname)});let p=null;function ye(a){p=a}const A=a=>{let e=null;if(a.tagName.toLowerCase()==="a"&&a.hasAttribute("href")){const t=a;if(t.target==="_blank")return null;e=t.getAttribute("href")}else a.tagName.toLowerCase()==="button"&&a.hasAttribute("data-router-link")&&(e=a.getAttribute("data-router-link"));if(!e)return null;try{const t=new URL(e,document.location.origin);return t.origin!==document.location.origin?null:t.pathname+t.search+t.hash}catch{return null}},C=a=>{const e=l();let t=a;for(;t;){if(t.hasAttribute(e.general.dataNoRoutingAttribute))return!0;t=t.parentElement}return!1},ve=a=>{const e=new WeakMap,t=new WeakMap,i=new WeakMap,r=l(),n=f=>{if(!p)return;const c=f.currentTarget,h=A(c);if(!h||C(c)||!r.prefetch.enabled)return;const u=window.setTimeout(()=>{p&&p.prefetch(h,"low")},r.prefetch.hoverDelay);i.set(c,u)},o=f=>{const c=f.currentTarget,h=i.get(c);if(h&&(window.clearTimeout(h),i.delete(c)),p){const u=A(c);u&&p.cancelPrefetch(u)}},s=f=>{if(!p)return;const c=f.currentTarget,h=A(c);if(!h||C(c)||!r.prefetch.enabled)return;const u=window.setTimeout(()=>{p&&p.prefetch(h,"auto")},r.prefetch.touchDelay);i.set(c,u)},d=f=>{const c=f.currentTarget,h=i.get(c);h&&(window.clearTimeout(h),i.delete(c))},m=f=>c=>{const h=c.currentTarget;if(C(h))return;const u=A(h);u&&(c.preventDefault(),c.stopPropagation(),f(u))},M=f=>{f.forEach(c=>{if(c instanceof HTMLElement&&A(c)&&!C(c)){const u=m(a);if(c.addEventListener("click",u),e.set(c,u),r.prefetch.enabled&&p){const y={mouseenter:n,mouseleave:o,touchstart:s,touchend:d,touchcancel:d};c.addEventListener("mouseenter",y.mouseenter),c.addEventListener("mouseleave",y.mouseleave),c.addEventListener("touchstart",y.touchstart),c.addEventListener("touchend",y.touchend),c.addEventListener("touchcancel",y.touchcancel),t.set(c,y)}}})},L=f=>{f.forEach(c=>{if(c instanceof HTMLElement){const h=e.get(c);h&&(c.removeEventListener("click",h),e.delete(c));const u=t.get(c);u&&(c.removeEventListener("mouseenter",u.mouseenter),c.removeEventListener("mouseleave",u.mouseleave),c.removeEventListener("touchstart",u.touchstart),c.removeEventListener("touchend",u.touchend),c.removeEventListener("touchcancel",u.touchcancel),t.delete(c));const y=i.get(c);y&&(window.clearTimeout(y),i.delete(c))}})},ke=document.querySelectorAll(E.join(", "));M(ke);const Q=new MutationObserver(f=>{f.forEach(c=>{c.addedNodes.forEach(h=>{if(h instanceof HTMLElement){h.matches&&h.matches(E.join(", "))&&M([h]);const u=h.querySelectorAll?.(E.join(", "));u&&M(u)}}),c.removedNodes.forEach(h=>{if(h instanceof HTMLElement){h.matches&&h.matches(E.join(", "))&&L([h]);const u=h.querySelectorAll?.(E.join(", "));u&&L(u)}})})});return Q.observe(document.body,{childList:!0,subtree:!0}),()=>{Q.disconnect();const f=document.querySelectorAll(E.join(", "));L(f),document.querySelectorAll(E.join(", ")).forEach(h=>{if(h instanceof HTMLElement){const u=i.get(h);u&&(window.clearTimeout(u),i.delete(h))}})}};let W=null;function be(a){W=a}async function we(a,e){const t=document.body,i=document.body.parentElement,r=a.cloneNode(!0);W&&l().animations.enabled?await W.animatePageTransition(t,r,i,{type:e||"fade",duration:l().animations.defaultDuration,onComplete:()=>{B(a),H(r)}}):(i.replaceChild(r,t),B(a),H(r))}function B(a){const e=a.ownerDocument;e&&e.head&&U(e.head)}const Ee=async(a,e)=>{console.log("üé¨ –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –∫:",a,e?`(type: ${e})`:""),history.pushState({},"",a);const t=await O(a);if(!t){q(a);return}const i=await t.text(),r=$(i);await we(r.body,e)},Se=async(a,e={})=>{const t=l();let i=e.type;return i||(e.direction==="backward"?i=t.animations.animationTypes.includes("slide-right")?"slide-right":"fade":i=t.animations.animationTypes.includes("slide-left")?"slide-left":"fade"),Ee(a,i)};let Y=0,I=!1;window.addEventListener("popstate",a=>{const e=Date.now();if(e-Y<100||I)return;Y=e,I=!0;const i=a.state?.direction||(history.length>1?"backward":"forward");Se(window.location.pathname,{direction:i}),setTimeout(()=>{I=!1},100)});class j{cacheManager;prefetchManager;animationManager;serviceWorkerManager;eventEmitter;isInitialized=!1;detachRouteListeners=null;constructor(e){e&&x(e),this.cacheManager=new K,this.prefetchManager=new V(this.cacheManager),this.animationManager=new Z,this.serviceWorkerManager=new ee,this.eventEmitter=new te,this.injectAnimationStyles(),l().general.debug&&(console.log("üîß AdvancedRouter initialized with managers"),console.log("üìä Cache stats:",this.cacheManager.getStats()))}injectAnimationStyles(){if(document.head.querySelector("#router-animation-styles"))return;const e=document.createElement("style");e.id="router-animation-styles",e.setAttribute("data-keep",""),e.setAttribute("data-skip",""),e.textContent=this.createAnimationStyles(),document.head.appendChild(e)}async init(){if(this.isInitialized){console.warn("‚ö†Ô∏è AdvancedRouter already initialized");return}l().offline.enabled&&await this.serviceWorkerManager.register(),this.attachEnhancedRouteListeners(),this.prefetchInitialLinks(),this.isInitialized=!0,this.eventEmitter.emit("init"),console.log("üöÄ AdvancedRouter initialized with all features")}attachEnhancedRouteListeners(){l();const e=t=>{this.navigateTo(t)};ye(this.prefetchManager),be(this.animationManager),this.detachRouteListeners=ve(e)}prefetchInitialLinks(){l().prefetch.enabled&&(setTimeout(()=>{this.prefetchManager.prefetchNavigationLinks()},1e3),window.addEventListener("load",()=>{setTimeout(()=>{this.prefetchManager.prefetchNavigationLinks()},500)}))}async navigateTo(e,t={}){if(!this.isInitialized){console.warn("‚ö†Ô∏è Router not initialized, using base navigation"),z(e);return}this.eventEmitter.emit("navigation:start",e,t);try{const i=this.cacheManager.get(e);i?await this.loadFromCache(e,i,t):await this.loadFromServer(e,t),this.eventEmitter.emit("navigation:complete",e,t),this.prefetchManager.prefetchNavigationLinks(document.body)}catch(i){console.error("‚ùå Navigation failed:",i),this.eventEmitter.emit("navigation:error",e,i,t),z(e),setTimeout(()=>{this.attachEnhancedRouteListeners()},100)}}async loadFromCache(e,t,i={}){l().general.debug&&console.log(`üéØ Loading from cache: ${e}`),this.eventEmitter.emit("cache:hit",e);const n=new DOMParser().parseFromString(t.html,"text/html");await this.updatePage(n,e,!0,i)}async loadFromServer(e,t={}){l().general.debug&&console.log(`üåê Loading from server: ${e}`),this.eventEmitter.emit("cache:miss",e);try{const i=await fetch(e,{method:"GET"});if(!i.ok)throw new Error(`HTTP ${i.status}`);const r=await i.text(),n={};i.headers.forEach((d,m)=>{n[m]=d}),this.cacheManager.set(e,r,n);const s=new DOMParser().parseFromString(r,"text/html");await this.updatePage(s,e,!1,t)}catch(i){throw i}}async updatePage(e,t,i,r={}){this.detachRouteListeners&&(this.detachRouteListeners(),this.detachRouteListeners=null),history.pushState({},"",t);const n=document.body,o=e.body.cloneNode(!0),s=document.body.parentElement,d=r.skipAnimation?void 0:r.animationType||"fade";if(!l().animations.enabled||r.skipAnimation||!d){s.replaceChild(o,n),this.updateHead(e.head),this.runScripts(o),this.attachEnhancedRouteListeners(),this.eventEmitter.emit("page:updated",t,i,{animated:!1});return}await this.animationManager.animatePageTransition(n,o,s,{type:d,duration:l().animations.defaultDuration,onComplete:()=>{this.updateHead(e.head),this.runScripts(o),this.attachEnhancedRouteListeners(),this.eventEmitter.emit("page:updated",t,i,{animated:!0,animationType:d})}})}updateHead(e){const t=document.head,i=new Set;Array.from(t.children).forEach(o=>{(o.hasAttribute("data-keep")||o.hasAttribute("data-skip"))&&i.add(o)}),Array.from(t.children).forEach(o=>{i.has(o)||t.removeChild(o)}),Array.from(e.children).forEach(o=>{const s=o.hasAttribute("data-skip"),d=o.hasAttribute("data-keep");s||d&&(t.querySelector(`[data-keep][id="${o.id}"]`)||t.querySelector(`[data-keep][src="${o.getAttribute("src")}"]`))||t.appendChild(o.cloneNode(!0))});const r=e.querySelector("title"),n=t.querySelector("title");r&&n?n.textContent=r.textContent:r&&!n&&t.appendChild(r.cloneNode(!0))}runScripts(e){e.querySelectorAll("script").forEach(i=>{const r=document.createElement("script");Array.from(i.attributes).forEach(n=>{r.setAttribute(n.name,n.value)}),!i.src&&i.textContent&&(r.textContent=i.textContent),document.body.appendChild(r),i.remove()})}getCacheManager(){return this.cacheManager}getPrefetchManager(){return this.prefetchManager}getAnimationManager(){return this.animationManager}getServiceWorkerManager(){return this.serviceWorkerManager}on(e,t){return this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}isRouterInitialized(){return this.isInitialized}clearCache(){this.cacheManager.clear(),this.eventEmitter.emit("cache:cleared")}clearPrefetchQueue(){this.prefetchManager.clearQueue(),this.eventEmitter.emit("prefetch:cleared")}clearNavigationHistory(){this.prefetchManager.clearNavigationHistory(),this.eventEmitter.emit("navigation:history:cleared")}getIntelligentPrefetchStats(){return this.prefetchManager.getIntelligentPrefetch().getStats()}setIntelligentPrefetchEnabled(e){this.prefetchManager.getIntelligentPrefetch().setEnabled(e),this.eventEmitter.emit("intelligent:prefetch:enabled",e)}setOfflineModeEnabled(e){this.serviceWorkerManager.setEnabled(e),this.eventEmitter.emit("offline:mode:enabled",e)}async updateServiceWorker(){const e=await this.serviceWorkerManager.update();return this.eventEmitter.emit("service:worker:updated",e),e}async clearServiceWorkerCache(){const e=await this.serviceWorkerManager.clearCache();return this.eventEmitter.emit("service:worker:cache:cleared",e),e}async getServiceWorkerCacheStats(){return await this.serviceWorkerManager.getCacheStats()}isOfflineModeSupported(){return this.serviceWorkerManager.isServiceWorkerSupported()}isOfflineModeEnabled(){return this.serviceWorkerManager.isRegistered()}setAnimationsEnabled(e){const t=l();x({animations:{...t.animations,enabled:e}}),this.eventEmitter.emit("animations:enabled",e)}setDefaultAnimationType(e){const t=l();t.animations.animationTypes.includes(e)?(x({animations:{...t.animations,defaultType:e}}),this.eventEmitter.emit("animation:type:changed",e)):console.warn(`‚ö†Ô∏è Animation type "${e}" is not available`)}getAvailableAnimationTypes(){return l().animations.animationTypes}navigateWithAnimation(e,t,i=!1){return this.navigateTo(e,{animationType:t,skipAnimation:i})}navigateWithoutAnimation(e){return this.navigateTo(e,{skipAnimation:!0})}areAnimationsEnabled(){return l().animations.enabled}isAnimationInProgress(){return this.animationManager.isAnimationInProgress()}async cancelCurrentAnimation(){await this.animationManager.cancelCurrentAnimation(),this.eventEmitter.emit("animation:cancelled")}createAnimationStyles(){return`
      /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
      .router-animation-old,
      .router-animation-new {
        will-change: transform, opacity;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        transform-style: preserve-3d;
      }

      /* –ê–Ω–∏–º–∞—Ü–∏—è fade */
      @keyframes router-fade-in {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      @keyframes router-fade-out {
        from { opacity: 1; }
        to { opacity: 0; }
      }

      .router-animation-fade {
        animation-timing-function: ease-in-out;
      }

      /* –ê–Ω–∏–º–∞—Ü–∏—è slide-left */
      @keyframes router-slide-left-in {
        from { 
          transform: translateX(100%);
          opacity: 0;
        }
        to { 
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes router-slide-left-out {
        from { 
          transform: translateX(0);
          opacity: 1;
        }
        to { 
          transform: translateX(-100%);
          opacity: 0;
        }
      }

      .router-animation-slide-left {
        animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* –ê–Ω–∏–º–∞—Ü–∏—è slide-right */
      @keyframes router-slide-right-in {
        from { 
          transform: translateX(-100%);
          opacity: 0;
        }
        to { 
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes router-slide-right-out {
        from { 
          transform: translateX(0);
          opacity: 1;
        }
        to { 
          transform: translateX(100%);
          opacity: 0;
        }
      }

      .router-animation-slide-right {
        animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* –ê–Ω–∏–º–∞—Ü–∏—è slide-up */
      @keyframes router-slide-up-in {
        from { 
          transform: translateY(100%);
          opacity: 0;
        }
        to { 
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes router-slide-up-out {
        from { 
          transform: translateY(0);
          opacity: 1;
        }
        to { 
          transform: translateY(-100%);
          opacity: 0;
        }
      }

      .router-animation-slide-up {
        animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* –ê–Ω–∏–º–∞—Ü–∏—è slide-down */
      @keyframes router-slide-down-in {
        from { 
          transform: translateY(-100%);
          opacity: 0;
        }
        to { 
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes router-slide-down-out {
        from { 
          transform: translateY(0);
          opacity: 1;
        }
        to { 
          transform: translateY(100%);
          opacity: 0;
        }
      }

      .router-animation-slide-down {
        animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* –ê–Ω–∏–º–∞—Ü–∏—è collapse */
      @keyframes router-collapse-in {
        from { 
          transform: scale(1.2);
          opacity: 0;
        }
        to { 
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes router-collapse-out {
        from { 
          transform: scale(1);
          opacity: 1;
        }
        to { 
          transform: scale(0.8);
          opacity: 0;
        }
      }

      .router-animation-collapse {
        animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* –ê–Ω–∏–º–∞—Ü–∏—è diagonal */
      @keyframes router-diagonal-in {
        from { 
          transform: translate(-100%, -100%) scale(1.2);
          opacity: 0;
        }
        to { 
          transform: translate(0, 0) scale(1);
          opacity: 1;
        }
      }

      @keyframes router-diagonal-out {
        from { 
          transform: translate(0, 0) scale(1);
          opacity: 1;
        }
        to { 
          transform: translate(100%, 100%) scale(0.8);
          opacity: 0;
        }
      }

      .router-animation-diagonal {
        animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* –ö–ª–∞—Å—Å—ã –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ */
      .router-animate-fade {
        animation: router-fade-in 0.3s ease-in-out;
      }

      .router-animate-slide-left {
        animation: router-slide-left-in 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .router-animate-slide-right {
        animation: router-slide-right-in 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .router-animate-slide-up {
        animation: router-slide-up-in 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .router-animate-slide-down {
        animation: router-slide-down-in 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .router-animate-collapse {
        animation: router-collapse-in 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .router-animate-diagonal {
        animation: router-diagonal-in 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ prefers-reduced-motion */
      @media (prefers-reduced-motion: reduce) {
        .router-animation-old,
        .router-animation-new,
        .router-animate-fade,
        .router-animate-slide-left,
        .router-animate-slide-right,
        .router-animate-slide-up,
        .router-animate-slide-down,
        .router-animate-collapse,
        .router-animate-diagonal {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* –£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π */
      .router-animation-container {
        position: relative;
        overflow: hidden;
      }

      .router-animation-wrapper {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ */
      .router-loading-indicator {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background: linear-gradient(90deg, #667eea, #764ba2);
        z-index: 9999;
        transform-origin: 0 50%;
        animation: router-loading 1s infinite;
      }

      @keyframes router-loading {
        0% { transform: scaleX(0); }
        50% { transform: scaleX(0.5); }
        100% { transform: scaleX(1); }
      }

      /* –ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª –ø–æ—Å–ª–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
      .router-smooth-scroll {
        scroll-behavior: smooth;
      }

      /* –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å prefers-reduced-motion */
      @media (prefers-reduced-motion: reduce) {
        .router-smooth-scroll {
          scroll-behavior: auto;
        }
        
        .router-loading-indicator {
          display: none;
        }
      }
    `}}const g=new j({general:{debug:process.env.NODE_ENV==="development",dataNoRoutingAttribute:"data-no-routing"}});oe(),g.init().then(()=>{console.log("‚úÖ AdvancedRouter fully initialized"),typeof window<"u"&&(window.clearRouterCache=()=>(g.clearCache(),console.log("üßπ Router cache cleared"),"Router cache cleared successfully"),window.clearPrefetchQueue=()=>(g.clearPrefetchQueue(),console.log("üßπ Prefetch queue cleared"),"Prefetch queue cleared successfully"),window.clearNavigationHistory=()=>(g.clearNavigationHistory(),console.log("üßπ Navigation history cleared"),"Navigation history cleared successfully"),window.clearServiceWorkerCache=async()=>{const a=await g.clearServiceWorkerCache();return console.log("üßπ Service Worker cache cleared:",a),`Service Worker cache cleared: ${a}`},window.getCacheStats=()=>{const a=g.getCacheManager().getStats();return console.log("üìä Cache stats:",a),a},window.getPrefetchStats=()=>{const a=g.getPrefetchManager().getStats();return console.log("üìä Prefetch stats:",a),a},window.getCachedUrls=()=>{const a=g.getCacheManager().getUrls();return console.log("üìã Cached URLs:",a),a},window.clearAllRouterData=async()=>{console.log("üßπ Starting comprehensive router data cleanup..."),g.clearCache(),console.log("‚úÖ Router cache cleared"),g.clearPrefetchQueue(),console.log("‚úÖ Prefetch queue cleared"),g.clearNavigationHistory(),console.log("‚úÖ Navigation history cleared");try{const a=await g.clearServiceWorkerCache();console.log("‚úÖ Service Worker cache cleared:",a)}catch(a){console.warn("‚ö†Ô∏è Could not clear Service Worker cache:",a)}return console.log("üéâ All router data cleared successfully"),"All router data cleared successfully"},console.log("üîß Global router management functions added to window object"),console.log("üìã Available functions:"),console.log("  - clearRouterCache() - Clear router cache"),console.log("  - clearPrefetchQueue() - Clear prefetch queue"),console.log("  - clearNavigationHistory() - Clear navigation history"),console.log("  - clearServiceWorkerCache() - Clear Service Worker cache"),console.log("  - clearAllRouterData() - Clear ALL router data"),console.log("  - getCacheStats() - Get cache statistics"),console.log("  - getPrefetchStats() - Get prefetch statistics"),console.log("  - getCachedUrls() - Get all cached URLs"))}).catch(a=>{console.error("‚ùå Failed to initialize AdvancedRouter:",a)}),w.AdvancedRouter=j,w.router=g,Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})}));
